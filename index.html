<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shorts Combiner</title>
<style>
body { font-family: Arial, sans-serif; max-width: 900px; margin: 20px auto; padding: 12px; background: #f3f3f3; }
h1 { font-size: 22px; margin-bottom: 15px; }
input, button { padding: 10px; margin: 5px 0; }
button { background: #1976d2; color: white; border: none; border-radius: 5px; cursor: pointer; }
button:hover { background: #115293; }
#log { margin-top: 12px; background: #000; color: #0f0; padding: 10px; border-radius: 5px; font-family: monospace; max-height: 200px; overflow-y: auto; }
#result { margin-top: 12px; }
</style>
</head>
<body>
<h1>Shorts Combiner</h1>
<input type="file" id="fileInput" multiple accept="video/*"><br>
<button id="combineBtn">Combine Videos</button>
<div id="log"></div>
<div id="result"></div>

<script>
const fileInput = document.getElementById("fileInput");
const combineBtn = document.getElementById("combineBtn");
const log = document.getElementById("log");
const result = document.getElementById("result");

combineBtn.onclick = async () => {
  const files = fileInput.files;
  if (!files.length) { alert("Please select at least one video to combine!"); return; }

  log.innerText = "⏳ Uploading and combining videos...";
  result.innerHTML = "";

  const formData = new FormData();
  for (let file of files) formData.append("videos", file);

  try {
    const res = await fetch("/combine", { method: "POST", body: formData });
    if (!res.ok) throw new Error(`Server responded with ${res.status}`);

    const blob = await res.blob();
    const videoUrl = URL.createObjectURL(blob);

    log.innerText = "✅ Done! Combined video ready below.";
    result.innerHTML = `
      <video controls style="width:100%;max-width:480px;border-radius:10px;margin-top:10px">
        <source src="${videoUrl}" type="video/mp4">
      </video>
      <br>
      <a href="${videoUrl}" download="combined.mp4">⬇️ Download Combined Video</a>
    `;
  } catch (err) {
    console.error(err);
    log.innerText = "❌ Error combining videos: " + err.message;
  }
};
</script>
</body>
</html>

